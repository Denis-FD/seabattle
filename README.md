# Морской бой <!-- omit in toc -->

Консольная игра «Морской бой» для двух игроков по сети (TCP, C++20, Boost.Asio). Один исполняемый файл работает как **сервер** и как **клиент** — режим определяется параметрами командной строки.

## Содержание <!-- omit in toc -->
- [Правила игры](#правила-игры)
- [Требования](#требования)
- [Сборка](#сборка)
- [Запуск](#запуск)
- [Демонстрация](#демонстрация)
- [Протокол](#протокол)
- [Структура проекта](#структура-проекта)
- [Лицензия](#лицензия)

## Правила игры
На поле каждого игрока размером 8х8 клеток располагается 10 кораблей: 1 четырёхпалубный (занимающий 4 клетки), 2 трёхпалубных, 3 двухпалубных, 4 однопалубных. Корабли не могут накладываться друг на друга, а также соприкасаться по горизонтали, диагонали и вертикали.

Расстановка кораблей случайна и зависит от [сида (seed)](https://en.wikipedia.org/wiki/Random_seed) — начального значения генератора псевдослучайных чисел, передаваемого параметром командной строки при запуске игры.

Игроки делают выстрелы, не видя расположение кораблей соперника. При промахе ход передаётся другому игроку. При попадании даётся право ещё одного выстрела. Соперник сообщает результат выстрела — «мимо», «попал», «убил». Последний статус означает, что поражены все клетки, занимаемые кораблём.

Первым ходит клиент. Побеждает тот, кто первым уничтожит все корабли соперника.

## Требования
- C++20
- Boost 1.78+
- GCC 11+
- CMake 3.11+
- Conan 1.x

## Сборка
```bash
# 1. Создать каталог сборки и перейти в него:
mkdir -p build && cd build
# 2. Установить зависимости:
conan install .. --build=missing -s compiler.libcxx=libstdc++11 -s build_type=Release
# 3. Сгенерировать проект:
cmake .. -DCMAKE_BUILD_TYPE=Release
# 4. Собрать проект:
cmake --build .
```

## Запуск
```bash
./seabattle <seed> [<ip>] <port>
```
**Параметры:**
- **seed** - число для инициализации случайных значений (любое положительное целое).
- **ip** (опционально) - IP-адрес сервера (для клиента). 127.0.0.1 для локального подключения.
- **port** - порт для подключения (в диапазоне 1024–65535).

**Пример:**
- Сервер (ждет подключения):
```bash
./seabattle 12345 9000
```
- Клиент (подключается, ходит первым):
```bash
./seabattle 345 127.0.0.1 9000
```
**Ввод координат:**
- Формат: **A1…H8** (буква строки A–H и цифра столбца 1–8).

## Демонстрация
![Demo GIF](assets/seabattle_demo.gif)

## Протокол
- **Ход:** отправляются **2 байта** — текстовые координаты клетки (например, `C7`).
- **Ответ:** принимается **1 байт** — `0`=MISS, `1`=HIT, `2`=KILL.

## Структура проекта
```bash
├── assets
│   └── seabattle_demo.gif
├── src
│   ├── main.cpp
│   ├── seabattle.cpp
│   └── seabattle.h
├── CMakeLists.txt
├── LICENSE
├── README.md
└── conanfile.txt
```

## Лицензия
MIT — см. файл [LICENSE](LICENSE).
